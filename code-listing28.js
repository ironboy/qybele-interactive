const sleep = ms => new Promise(res => setTimeout(res, ms));

async function start(part2) {
  let $ = jQuery;
  /*let contentHolder = $(document.currentScript).parents('#js-module_content');
  if (!contentHolder.length && !part2) { setTimeout(start, 20); console.log('retry'); return; }
  let content = contentHolder.find('section.module_content');
  if (!content.length) { setTimeout(() => start(true), 20); console.log('retry2'); return; }
  console.log(content);
  content.append('<p>This is some extra content generated by JavaScript.</p>');*/
  const thisScriptTag = $(document.currentScript);
  const htmlStructure = [...thisScriptTag.parents()];
  console.log(htmlStructure);
  console.log(htmlStructure[1].innerHTML);
  await sleep(1000);
  console.log(htmlStructure);
  console.log(htmlStructure[1].innerHTML);
  $(htmlStructure[1]).append('<p>This is some extra content generated by JavaScript.</p>');
}

start();
