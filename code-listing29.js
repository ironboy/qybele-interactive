const sleep = ms => new Promise(res => setTimeout(res, ms));

async function start(part2) {
  let $ = jQuery;
  /*let contentHolder = $(document.currentScript).parents('#js-module_content');
  if (!contentHolder.length && !part2) { setTimeout(start, 20); console.log('retry'); return; }
  let content = contentHolder.find('section.module_content');
  if (!content.length) { setTimeout(() => start(true), 20); console.log('retry2'); return; }
  console.log(content);
  content.append('<p>This is some extra content generated by JavaScript.</p>');*/
  const thisScriptTag = $(document.currentScript);
  const htmlStructure = [...thisScriptTag.parents()];
  const mainParent = htmlStructure[1];
  let content = $(mainParent).find('.module_content');
  console.log(content, content.html());
  await sleep(1000);
  content = $(mainParent).find('.module_content');
  console.log(content, content.html());
  content.append('<p>This is some extra content generated by JavaScript.</p>');
}

start();
